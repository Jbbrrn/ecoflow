<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco Flow - Smart Greenhouse Management | University of Batangas</title>
    <link rel="stylesheet" href="css/landing.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body class="landing-page">
    <!-- Header -->
    <header class="main-header">
        <div class="header-container">
            <a href="#home" class="header-brand">
                <img src="css/logo_ecoflow.png" alt="Eco Flow Logo" class="brand-icon">
                <span class="brand-text">Eco Flow</span>
            </a>
            <button class="mobile-menu-toggle" aria-label="Toggle menu">
                <span class="menu-icon">‚ò∞</span>
            </button>
            <nav class="header-nav">
            </nav>
            <div class="header-actions">
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section" id="home">
        <div class="hero-background-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">Eco Flow: Where Agriculture Meets Innovation</h1>
            <p class="hero-subtitle">
                A greenhouse monitoring web app developed by IT students of the University of Batangas,  
                seamlessly integrated with automated irrigation hardware engineered by CPE students.
            </p>
            <div class="hero-buttons">
                <a href="#login" class="btn-hero-primary"><span>Login</span></a>
            </div>
        </div>
    </section>

    <!-- Services/Features Section -->
    <section class="services-cards-section">
        <div class="section-container">
            <div class="services-cards-grid">
                <div class="service-card fade-in-up" data-card="iot">
                    <div class="card-image">
                        <img src="css/soilsensor.jpg" alt="IoT Sensor Monitoring" class="card-img">
                        <div class="image-overlay">
                            <div class="plus-icon">+</div>
                            <div class="overlay-content">
                                <p class="overlay-text">Real-time monitoring</p>
                            </div>
                        </div>
                        <div class="card-shine"></div>
                    </div>
                    <h3 class="card-title">IoT Sensor Monitoring</h3>
                    <div class="card-description">
                        <p>Monitor your greenhouse environment in real-time with advanced IoT sensors. Track temperature, humidity, soil moisture, and light levels to ensure optimal growing conditions for your plants.</p>
                        <button class="close-description" aria-label="Close description">√ó</button>
                    </div>
                </div>
                <div class="service-card fade-in-up" data-card="analytics">
                    <div class="card-image">
                        <img src="css/data_analytics.png" alt="Data Analytics Dashboard" class="card-img">
                        <div class="image-overlay">
                            <div class="plus-icon">+</div>
                            <div class="overlay-content">
                                <p class="overlay-text">Advanced insights</p>
                            </div>
                        </div>
                        <div class="card-shine"></div>
                    </div>
                    <h3 class="card-title">Data Analytics Dashboard</h3>
                    <div class="card-description">
                        <p>Gain valuable insights from your greenhouse data with comprehensive analytics. Visualize trends, track performance metrics, and make data-driven decisions to optimize your agricultural operations.</p>
                        <button class="close-description" aria-label="Close description">√ó</button>
                    </div>
                </div>
                <div class="service-card fade-in-up" data-card="chatbot">
                    <div class="card-image">
                        <img src="css/AI_chatbot.jpg" alt="AI Chatbot Assistant" class="card-img">
                        <div class="image-overlay">
                            <div class="plus-icon">+</div>
                            <div class="overlay-content">
                                <p class="overlay-text">Intelligent assistance</p>
                            </div>
                        </div>
                        <div class="card-shine"></div>
                    </div>
                    <h3 class="card-title">AI Chatbot Assistant</h3>
                    <div class="card-description">
                        <p>Get instant answers and expert guidance from our AI-powered chatbot. Ask questions about plant care, irrigation schedules, troubleshooting, and best practices for sustainable greenhouse management.</p>
                        <button class="close-description" aria-label="Close description">√ó</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Us Section -->
    <section class="about-us-section" id="about">
        <div class="section-container">
            <div class="about-grid">
                <div class="about-left">
                    <h2 class="about-heading">Welcome to Eco Flow<br> Innovation in Smart Agriculture</h2>
                    <p class="about-description">
                        Eco Flow is a thesis project developed by students from the <strong>Information Technology and Computer Engineering</strong> programs of the <strong>University of Batangas</strong>. Rooted in a passion for sustainability and driven by innovation, this platform empowers greenhouse management through IoT monitoring, data analytics, and an AI-powered chatbot assistant.
                    </p>
                    <p class="about-description">
                        Our mission is to provide smart, accessible tools that support efficient urban gardening and promote environmental stewardship through technology.
                    </p>
                </div>
                <div class="about-right">
                    <div class="about-image">
                        <div class="fusion360-container">
                            <iframe 
                                src="https://myub234.autodesk360.com/g/shares/SH28cd1QT2badd0ea72b8278648aed77a8f9" 
                                class="fusion360-viewer"
                                frameborder="0"
                                allowfullscreen
                                allow="autoplay; fullscreen; vr; xr-spatial-tracking; camera; microphone"
                                title="Punlaan Greenhouse 3D Model"
                                loading="lazy"
                                sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-presentation">
                            </iframe>
                            <div class="fusion360-overlay-label">
                                <div class="fusion360-label-content">
                                    <span class="fusion-icon">üåø</span>
                                    <span class="fusion-text">Punlaan Greenhouse</span>
                                </div>
                            </div>
                            <a href="https://myub234.autodesk360.com/g/shares/SH28cd1QT2badd0ea72b8278648aed77a8f9" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="fusion360-fullscreen-link"
                               title="Open in fullscreen">
                                <span class="fullscreen-icon">‚õ∂</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="statistics-grid">
                <div class="stat-item">
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">Monitoring</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">Automated</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">AI</div>
                    <div class="stat-label">Powered</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">Sustainable</div>
                    <div class="stat-label">Users</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Process Section -->
    <section class="process-section">
        <div class="section-container">
            <div class="process-header">
                <h2 class="process-heading">Meticulous And Sustainable Process.</h2>
                <a href="#services" class="btn-process">Our Process</a>
            </div>
            <div class="process-steps">
                <div class="process-step">
                    <div class="step-number">01</div>
                    <div class="step-icon">üîç</div>
                    <h3 class="step-title">Discovery and Consultation</h3>
                    <p class="step-description">
                        Our system analyzes your greenhouse environment to understand current conditions, 
                        sensor data, and optimization opportunities.
                    </p>
                </div>
                <div class="process-step">
                    <div class="step-number">02</div>
                    <div class="step-icon">üå±</div>
                    <h3 class="step-title">IoT Sensor Integration</h3>
                    <p class="step-description">
                        Eco Flow prioritizes real-time monitoring through advanced IoT sensors for 
                        temperature, humidity, and soil moisture tracking.
                    </p>
                </div>
                <div class="process-step">
                    <div class="step-number">03</div>
                    <div class="step-icon">üíß</div>
                    <h3 class="step-title">Water-Efficient Irrigation</h3>
                    <p class="step-description">
                        Eco Flow is committed to responsible water management through automated 
                        irrigation systems that optimize usage based on sensor data.
                    </p>
                </div>
                <div class="process-step">
                    <div class="step-number">04</div>
                    <div class="step-icon">‚úì</div>
                    <h3 class="step-title">Quality Control & Support</h3>
                    <p class="step-description">
                        Eco Flow doesn't consider system setup as the end. We provide continuous 
                        monitoring, analytics, and AI-powered support for optimal results.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Section -->
    <section class="login-section" id="login">
        <div class="section-container">
            <div class="login-wrapper">
                <h2 class="login-title">Access Your Dashboard</h2>
                <p class="login-subtitle">Sign in to start managing your smart greenhouse</p>
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            placeholder="Enter your email address" 
                            required
                            autocomplete="email"
                        />
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="input-wrapper">
                            <input 
                                type="password" 
                                id="password" 
                                name="password" 
                                placeholder="Enter your password" 
                                required
                                autocomplete="current-password"
                            />
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-login">
                        SIGN IN
                    </button>
                    
                    <div id="message" class="message"></div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-left">
                <p class="footer-text">¬© 2025 Eco Flow - Smart Greenhouse Management System</p>
                <p class="thesis-banner">A Thesis Project by Students of the University of Batangas</p>
            </div>
        
    </footer>

    <script>
        // Login Form Handler
        document.getElementById('loginForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            const form = event.target;
            const formData = new FormData(form);
            
            const credentials = {
                email: formData.get('email'),
                password: formData.get('password')
            };

            const messageElement = document.getElementById('message');
            const submitButton = form.querySelector('button[type="submit"]');
            const originalButtonText = submitButton.textContent;
            
            messageElement.textContent = '';
            messageElement.className = 'message';
            submitButton.disabled = true;
            submitButton.textContent = 'SIGNING IN...';

            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(credentials)
                });

                const result = await response.json();

                if (response.ok) {
                    localStorage.setItem('userToken', result.token); 
                    localStorage.setItem('userRole', result.userRole);
                    
                    messageElement.textContent = `Welcome, ${result.username}! Redirecting...`;
                    messageElement.className = 'message message-success';
                    
                    setTimeout(() => {
                        if (result.userRole === 'admin') {
                            window.location.href = 'admin_dashboard.html';
                        } else if (result.userRole === 'user') {
                            window.location.href = 'user_dashboard.html';
                        }
                    }, 1000);
                    
                } else {
                    messageElement.textContent = result.message || 'Invalid credentials. Please try again.';
                    messageElement.className = 'message message-error';
                    submitButton.disabled = false;
                    submitButton.textContent = originalButtonText;
                }

            } catch (error) {
                console.error('Network Error:', error);
                messageElement.textContent = 'Connection error. Please check your internet and try again.';
                messageElement.className = 'message message-error';
                submitButton.disabled = false;
                submitButton.textContent = originalButtonText;
            }
        });

        // Mobile menu toggle
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const headerNav = document.querySelector('.header-nav');
        const navLinks = document.querySelectorAll('.nav-link');

        if (mobileMenuToggle) {
            mobileMenuToggle.addEventListener('click', function() {
                headerNav.classList.toggle('active');
                const menuIcon = this.querySelector('.menu-icon');
                menuIcon.textContent = headerNav.classList.contains('active') ? '‚úï' : '‚ò∞';
            });
        }

        // Close mobile menu when clicking on a link
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth <= 768) {
                    headerNav.classList.remove('active');
                    if (mobileMenuToggle) {
                        const menuIcon = mobileMenuToggle.querySelector('.menu-icon');
                        menuIcon.textContent = '‚ò∞';
                    }
                }
            });
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            if (window.innerWidth <= 768 && 
                !headerNav.contains(e.target) && 
                !mobileMenuToggle.contains(e.target) &&
                headerNav.classList.contains('active')) {
                headerNav.classList.remove('active');
                const menuIcon = mobileMenuToggle.querySelector('.menu-icon');
                menuIcon.textContent = '‚ò∞';
            }
        });

        // Header scroll effect
        const mainHeader = document.querySelector('.main-header');
        let lastScroll = 0;

        window.addEventListener('scroll', function() {
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > 100) {
                mainHeader.classList.add('scrolled');
            } else {
                mainHeader.classList.remove('scrolled');
            }
            
            lastScroll = currentScroll;
        });

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const offsetTop = target.offsetTop - 80;
                    window.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Card click to show description
        document.querySelectorAll('.service-card').forEach(card => {
            const closeBtn = card.querySelector('.close-description');
            
            // Open description on card click
            card.addEventListener('click', function(e) {
                // Don't trigger if clicking the close button
                if (e.target === closeBtn || closeBtn.contains(e.target)) {
                    return;
                }
                
                // Close other active cards
                document.querySelectorAll('.service-card').forEach(otherCard => {
                    if (otherCard !== card && otherCard.classList.contains('active')) {
                        otherCard.classList.remove('active');
                    }
                });
                
                // Toggle current card
                card.classList.toggle('active');
                
                // Scroll card into view if it's active
                if (card.classList.contains('active')) {
                    setTimeout(() => {
                        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                }
            });
            
            // Close description on close button click
            if (closeBtn) {
                closeBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    card.classList.remove('active');
                });
            }
        });
        
        // Close card descriptions when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.service-card')) {
                document.querySelectorAll('.service-card.active').forEach(card => {
                    card.classList.remove('active');
                });
            }
        });
        
        // Advanced card hover effects with 3D parallax (only when not active)
        document.querySelectorAll('.service-card').forEach(card => {
            const cardImage = card.querySelector('.card-image');
            let isHovering = false;
            
            card.addEventListener('mousemove', function(e) {
                if (!isHovering || this.classList.contains('active')) return;
                
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const rotateX = (y - centerY) / 15;
                const rotateY = (centerX - x) / 15;
                
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-15px) scale(1.02)`;
                
                if (cardImage) {
                    const moveX = (x - centerX) / 25;
                    const moveY = (y - centerY) / 25;
                    cardImage.style.transform = `translate(${moveX}px, ${moveY}px) scale(1.1) rotate(1deg)`;
                }
            });
            
            card.addEventListener('mouseenter', function() {
                if (!this.classList.contains('active')) {
                    isHovering = true;
                    this.style.transition = 'transform 0.3s ease-out';
                }
            });
            
            card.addEventListener('mouseleave', function() {
                if (!this.classList.contains('active')) {
                    isHovering = false;
                    this.style.transition = 'transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
                    this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateY(0) scale(1)';
                    if (cardImage) {
                        cardImage.style.transform = 'translate(0, 0) scale(1) rotate(0deg)';
                    }
                }
            });
        });

        // Intersection Observer for scroll-triggered animations
        const cardObserverOptions = {
            threshold: 0.2,
            rootMargin: '0px 0px -100px 0px'
        };

        const cardObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry, index) => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.classList.add('visible');
                    }, index * 150);
                    cardObserver.unobserve(entry.target);
                }
            });
        }, cardObserverOptions);

        // Observe all service cards
        document.querySelectorAll('.service-card').forEach(card => {
            cardObserver.observe(card);
        });
    </script>
</body>
</html>
